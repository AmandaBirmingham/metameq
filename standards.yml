ebi_null_vals_all: &ebi_null_vals_all
  allowed:
    - "not collected" 
    - "not provided"
    - "restricted access"
    - "not applicable"
  type: string
taxon_id_formats: &taxon_id_formats
  - regex: ^\d+$
    type: string
  - *ebi_null_vals_all
host_type_specific_metadata:
  base:
    metadata_fields:
      sample_name:
        empty: false
        is_phi: false
        regex: ^[a-zA-Z0-9\.]+$
        required: true
        type: string
        unique: true
      sample_type:
        empty: false
        is_phi: false
        required: true
        type: string
    host_type_specific_metadata:
      ebi_submittable:
        "default": "not provided"
        metadata_fields:
          anonymized_name:
            empty: true
            is_phi: false
            required: false
            type: string
          collection_device:
            empty: false
            is_phi: false
            required: false
            type: string
          collection_method:
            empty: false
            is_phi: false
            required: false
            type: string
          collection_timestamp:
            anyof:
              - regex: '^([0-9]{4})(?:-([0-1][0-9])(?:-([0-3][0-9])(?: ([0-2][0-9])(?::([0-5][0-9])(?::([0-5][0-9]))?)?)?)?)?$'
                type: string
                check_with: date_not_in_future
              - *ebi_null_vals_all
            empty: false
            field_desc: The day and time of sampling as a single point in time expressed in
              24-hour time format, e.g. 2016-11-22.
            is_phi: false
            required: true
          collection_date:
            anyof:
              - regex: '^([0-9]{4})(?:-([0-1][0-9])(?:-([0-3][0-9])(?: ([0-2][0-9])(?::([0-5][0-9])(?::([0-5][0-9]))?)?)?)?)?$'
                type: string
                check_with: date_not_in_future
              - *ebi_null_vals_all
            empty: false
            field_desc: The day and time of sampling as a single point in time expressed in
              24-hour time format, e.g. 2016-11-22.
            is_phi: false
            required: true
          country:
            empty: false
            is_phi: false
            required: true
            type: string
          description:
            empty: false
            field_desc: A description of the sample that can include site, subject, and sample
              material.
            is_phi: false
            required: true
            type: string
          dna_extracted:
            allowed:
              - 'TRUE'
              - 'FALSE'
              - not collected
              - not provided
            type: string
            empty: false
            field_desc: Whether the DNA been extracted from the sample.
            is_phi: false
            required: true
          elevation:
            anyof:
              - min: -413.0
                type: number
              - allowed:
                - not collected
                - not provided
                - restricted access
                type: string
            empty: false
            field_desc: Height of land above sea level in meters at the sampling site
            is_phi: false
            required: true
            units: elevation_units
          elevation_units:
            allowed:
              - meters
            # default: meters
            empty: false
            is_phi: false
            required: false
            type: string
          empo_1:
            empty: false
            is_phi: false
            required: true
            type: string
          empo_2:
            empty: false
            is_phi: false
            required: true
            type: string
          empo_3:
            empty: false
            is_phi: false
            required: true
            type: string
          empo_4:
            # NOT putting the full list of options here: they should be
            # resolved at the leaf levels
            empty: false
            is_phi: false
            required: true
            type: string
          env_biome:
            empty: false
            field_desc: Classification of the location where the sample was obtained, from the
              Environmental Ontology (ENVO).
            is_phi: false
            required: true
            type: string
          env_feature:
            empty: false
            field_desc: Classification of a specific feature in the biome, from the Environmental
              Ontology (ENVO).
            is_phi: false
            required: true
            type: string
          env_material:
            empty: false
            field_desc: Classification of the material being sampled, from the Environmental
              Ontology (ENVO).
            is_phi: false
            required: true
            type: string
          env_package:
            empty: false
            field_desc: Environment where the sample was obtained.
            is_phi: false
            required: true
            type: string
          geo_loc_name:
            empty: false
            field_desc: The geographical origin of the sample as defined by the country or location
              as chosen from the GAZ ontology, e.g. USA:CA:San Diego .
            is_phi: false
            required: true
            type: string
          latitude:
            anyof:
              - max: 90.00
                min: -90.00
                type: number
              - allowed:
                - not collected
                - not provided
                - restricted access
                type: string
            empty: false
            field_desc: Location of the sample site by latitude in decimal degrees, e.g. 32.72
              for San Diego, USA.
            is_phi: false
            required: true
            units: latitude_units
          latitude_units:
            allowed:
              - Decimal degrees
            # default: Decimal degrees
            empty: false
            is_phi: false
            required: false
            type: string
          longitude:
            anyof:
              - max: 180.00
                min: -180.00
                type: number
              - allowed:
                - not collected
                - not provided
                - restricted access
                type: string
            empty: false
            field_desc: Location of the sample site by longitude in decimal degrees, e.g. -117.16
              for San Diego, USA.
            is_phi: false
            required: true
            units: longitude_units
          longitude_units:
            allowed:
              - Decimal degrees
            # default: Decimal degrees
            empty: false
            is_phi: false
            required: false
            type: string
          physical_specimen_location:
            empty: false
            field_desc: Where the sample is stored (if there is any left).
            is_phi: false
            required: true
            type: string
          physical_specimen_remaining:
            allowed:
              - 'TRUE'
              - 'FALSE'
              - not collected
              - not provided
              - restricted access
            type: string
            empty: false
            field_desc: Whether there is any raw specimen left to sample.
            is_phi: false
            required: true
          scientific_name:
            empty: false
            field_desc: The scientific name of the metagenome associated with this sample, as
              defined in the NCBI Taxonomy. Be aware that this is NOT the scientific name of
              the host! Note that this value must correspond to the taxon id entered in the
              taxon_id field; for example, for a sample from the human gut, the scientific_name
              should be human gut microbiome, corresponding to taxon id 408170.
            is_phi: false
            required: true
            type: string
          taxon_id:
            anyof: *taxon_id_formats
            empty: false
            field_desc: The NCBI Taxonomy id of the metagenome associated with this sample.
              Be aware that this is NOT the taxon id of the host! Note that this value must
              correspond to the scientific name entered in the scientific_name field; for example,
              for a sample from the human gut, the taxon_id should be 408170, corresponding
              to the scientific name human gut metagenome.
            is_phi: false
            required: true
          title:
            empty: false
            field_desc: Title of study.
            is_phi: false
            required: true
            type: string
          # TODO: Q: is this field actually required or no?
#          tube_id:
#            empty: false
#            field_desc: The identification of the tube containing the sample.
#            is_phi: false
#            required: true
#            type: string
        host_type_specific_metadata:
          host_associated:
            metadata_fields:
              empo_1:
                allowed:
                  - Host-associated
                default: Host-associated
                type: string
              env_package:
                allowed:
                  - host-associated
                default: host-associated
                type: string
              host_age:
                anyof:
                  - min_exclusive: 0
                    type: number
                  - allowed:
                    - not collected
                    - not provided
                    type: string
                empty: false
                field_desc: Host age in appropriate units
                is_phi: false
                required: true
                units: host_age_units
              host_age_units:
                empty: false
                is_phi: false
                required: true
                type: string
              host_common_name:
                empty: false
                field_desc: common usage term for host e.g. human
                is_phi: false
                required: true
                type: string
              host_scientific_name:
                empty: false
                field_desc: host scientific name e.g. Homo sapiens
                is_phi: false
                required: true
                type: string
              host_subject_id:
                empty: false
                field_desc: A label that applies to all samples belonging to one subject or one
                  sample
                is_phi: false
                required: true
                type: string
              host_taxid:
                anyof: *taxon_id_formats
                empty: false
                field_desc: taxonomy id of host e.g. human is 9606
                is_phi: false
                required: true
              host_weight:
                anyof:
                  - min_exclusive: 0
                    type: number
                  - allowed:
                    - not collected
                    - not provided
                    type: string
                empty: false
                field_desc: in kilograms preferred
                is_phi: false
                required: true
                units: host_weight_units
              host_weight_units:
                empty: false
                is_phi: false
                required: true
                type: string
              # is there any reason time_point has to be host associated??
              time_point:
                anyof:
                  - type: integer
                  - allowed:
                    - not applicable
                    - not collected
                    - not provided
                    - restricted access
                    type: string
                empty: false
                field_desc: A numeric ID to indicate order of linked samples
                is_phi: false
                required: false
            host_type_specific_metadata:
              host_associated_non_saline:
                metadata_fields:
                  empo_2:
                    allowed:
                      - Host-associated (non-saline)
                    default: Host-associated (non-saline)
                    type: string
                host_type_specific_metadata:
                  animal_non_saline:
                    metadata_fields:
                      empo_3:
                        allowed:
                          - Animal (non-saline)
                        default: Animal (non-saline)
                        type: string
                      env_feature:
                        allowed:
                          - animal-associated habitat
                        default: animal-associated habitat
                        type: string
                      # apparently uberon ontology is just for animal species..
                      host_body_habitat:
                        empty: false
                        field_desc: from UBERON e.g skin, gastrointestinal tract
                        is_phi: false
                        required: true
                        type: string
                      host_body_product:
                        empty: false
                        field_desc: from UBERON e.g. skin, feces
                        is_phi: false
                        required: true
                        type: string
                      host_body_site:
                        empty: false
                        field_desc: from UBERON e.g. skin of arm, colon
                        is_phi: false
                        required: true
                        type: string
                      host_life_stage:
                          # TODO: Gail's writeup includes infant and juvenile
                          #  but NOT child ... but NPH uses child?
                        allowed:
                          - adult
                          - child
                          - not applicable
                          - not collected
                          - not provided
                          - restricted access
                        type: string
                        empty: false
                        field_desc: e.g. adult
                        is_phi: false
                        required: true
                      sex:
                        allowed:
                          - female
                          - male
                          - neuter
                          - hermaphrodite
                          - not applicable
                          - not collected
                          - not provided
                          - restricted access
                        type: string
                        empty: false
                        is_phi: false
                        required: true
                    host_type_specific_metadata:
                      vertebrate:
                        sample_type_specific_metadata:
                          colon content:
                            metadata_fields:
                              env_material:
                                allowed:
                                  - intestine environment
                                default: intestine environment
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:gastrointestinal system
                                default: UBERON:gastrointestinal system
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:lumen of gut
                                default: UBERON:lumen of gut
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:colon
                                default: UBERON:colon
                                type: string
                              scientific_name:
                                allowed:
                                  - gut metagenome
                                default: gut metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 749906
                                default: 749906
                                type: integer
                          colon mucosa:
                            metadata_fields:
                              env_material:
                                allowed:
                                  - intestine environment
                                default: intestine environment
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:gastrointestinal system
                                default: UBERON:gastrointestinal system
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:colon mucosa
                                default: UBERON:colon mucosa
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:colon
                                default: UBERON:colon
                                type: string
                              scientific_name:
                                allowed:
                                  - gut metagenome
                                default: gut metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 749906
                                default: 749906
                                type: integer
                          saliva:
                            metadata_fields:
                              empo_4:
                                allowed:
                                  - Animal secretion (non-saline)
                                default: Animal secretion (non-saline)
                                type: string
                              env_material:
                                allowed:
                                  - saliva material
                                default: saliva material
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:oral cavity
                                default: UBERON:oral cavity
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:saliva
                                default: UBERON:saliva
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:mouth
                                default: UBERON:mouth
                                type: string
                              scientific_name:
                                allowed:
                                  - oral metagenome
                                default: oral metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1227552
                                default: 1227552
                                type: integer
                          serum:
                            metadata_fields:
                              env_material:
                                allowed:
                                  - blood
                                default: blood
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:blood
                                default: UBERON:blood
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:serum
                                default: UBERON:serum
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:blood plasma
                                default: UBERON:blood plasma
                                type: string
                              scientific_name:
                                allowed:
                                  - blood metagenome
                                default: blood metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1676987
                                default: 1676987
                                type: integer
                          skin:
                            metadata_fields:
                              empo_4:
                                allowed:
                                  - Animal surface (non-saline)
                                default: Animal surface (non-saline)
                                type: string
                              env_material:
                                allowed:
                                  - sebum material
                                default: sebum material
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:skin
                                default: UBERON:skin
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:sebum
                                default: UBERON:sebum
                                type: string
                              scientific_name:
                                allowed:
                                  - skin metagenome
                                default: skin metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1338477
                                default: 1338477
                                type: integer
                          sputum:
                            metadata_fields:
                              env_material:
                                allowed:
                                  - bodily fluid material
                                default: bodily fluid material
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:respiratory system
                                default: UBERON:respiratory system
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:sputum
                                default: UBERON:sputum
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:lung
                                default: UBERON:lung
                                type: string
                              scientific_name:
                                allowed:
                                  - lung metagenome
                                default: lung metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1729361
                                default: 1729361
                                type: integer
                          # TODO: is this the correct level to introduce feces?
                          feces:
                            metadata_fields:
                              empo_4:
                                allowed:
                                  - Animal distal gut (non-saline)
                                default: Animal distal gut (non-saline)
                                type: string
                              env_material:
                                allowed:
                                  - fecal material
                                default: fecal material
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:feces
                                default: UBERON:feces
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:feces
                                default: UBERON:feces
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:feces
                                default: UBERON:feces
                                type: string
                              scientific_name:
                                allowed:
                                  - feces metagenome
                                default: feces metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1861841
                                default: 1861841
                                type: integer
                          tongue:
                            alias: saliva
                          urine:
                            metadata_fields:
                              env_material:
                                allowed:
                                  - urine material
                                default: urine material
                                type: string
                              host_body_habitat:
                                allowed:
                                  - UBERON:urine
                                default: UBERON:urine
                                type: string
                              host_body_product:
                                allowed:
                                  - UBERON:urine
                                default: UBERON:urine
                                type: string
                              host_body_site:
                                allowed:
                                  - UBERON:urine
                                default: UBERON:urine
                              scientific_name:
                                allowed:
                                  - urine metagenome
                                default: urine metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1346744
                                default: 1346744
                                type: integer
                        host_type_specific_metadata:
                          human:
                            metadata_fields:
                              env_biome:
                                # is urban really the only biome for humans?
                                allowed:
                                  - urban biome
                                default: urban biome
                                type: string
                              env_feature:
                                allowed:
                                  - human-associated habitat
                                default: human-associated habitat
                                type: string
                              env_package:
                                allowed:
                                  - human-associated
                                default: human-associated
                                type: string
                              host_age_units:
                                allowed:
                                  - years
                                default: years
                                type: string
                              host_body_mass_index:
                                anyof:
                                  - min_exclusive: 0
                                    type: number
                                  - allowed:
                                    - not applicable
                                    - not collected
                                    - not provided
                                    - restricted access
                                    type: string
                                empty: false
                                field_desc: Body mass index
                                is_phi: false
                                required: true
                              host_common_name:
                                allowed:
                                  - human
                                default: human
                                type: string
                              host_height:
                                anyof:
                                  - min_exclusive: 0
                                    type: number
                                  - allowed:
                                    - not collected
                                    - not provided
                                    type: string
                                empty: false
                                field_desc: Height (or length) of host in cm preferred
                                is_phi: false
                                required: true
                                units: host_height_units
                              host_height_units:
                                allowed:
                                  - cm
                                default: cm
                                empty: false
                                is_phi: false
                                required: true
                                type: string
                              host_scientific_name:
                                allowed:
                                  - Homo sapiens
                                default: Homo sapiens
                                type: string
                              host_taxid:
                                allowed:
                                  - '9606'
                                default: '9606'
                                type: string
                              host_weight_units:
                                allowed:
                                  - kg
                                default: kg
                                type: string
                              irb_institute:
                                type: string
                                empty: false
                                field_desc: the name of institute that approved the IRB (human studies)
                                is_phi: false
                                required: false
                              irb_protocol_id:
                                type: string
                                empty: false
                                field_desc: the ID of the IRB protocol that covers the collection and analysis of
                                  this sample (human studies)
                                is_phi: false
                                required: false
                            sample_type_specific_metadata:
                              antecubital crease:
                                alias: "antecubital fossa"
                              antecubital fossa:
                                # TODO: this is a duplicate of "skin of elbow"
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:elbow
                                    default: UBERON:elbow
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of arm"
                                    default: "skin of arm"
                                    type: string
                              axilla skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:axilla
                                    default: UBERON:axilla
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "axilla skin"
                                    default: "axilla skin"
                                    type: string
                              back:
                                alias: "skin of back"
                              buccal mucosa:
                                base_type: "saliva"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:buccal mucosa
                                    default: UBERON:buccal mucosa
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "buccal mucosa"
                                    default: "buccal mucosa"
                                    type: string
                              cheek:
                                alias: "skin of cheek"
                              # TODO: why is this a different item than (rather than an alias of) "skin of elbow"?
                              elbow skin:
                                alias: "skin of elbow"
                              external auditory canal:
                                alias: "skin of external ear canal"
                              face:
                                alias: "skin of face"
                              feces:
                                metadata_fields:
                                  env_package:
                                    allowed:
                                      - human-gut
                                    default: human-gut
                                    type: string
                                  scientific_name:
                                    allowed:
                                      - human gut metagenome
                                    default: human gut metagenome
                                    type: string
                                  taxon_id:
                                    allowed:
                                      - 408170
                                    default: 408170
                                    type: integer
                              forehead:
                                alias: "skin of forehead"
                              glabella:
                                alias: "glabella skin"
                              glabella skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:glabella skin
                                    default: UBERON:glabella skin
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of forehead"
                                    default: "skin of forehead"
                                    type: string
                              heel skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:heel
                                    default: UBERON:heel
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of foot"
                                    default: "skin of foot"
                                    type: string
                              hypothenar palm:
                                alias: "skin of palm of manus"
                              inguinal crease:
                                alias: "skin of inguinal fold"
                              interdigit web:
                                alias: "manual digit skin"
                              manual digit skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:manual digit
                                    default: UBERON:manual digit
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of hand"
                                    default: "skin of hand"
                                    type: string
                              manubrium:
                                alias: "skin of manubrium of sternum"
                              nail of pedal digit:
                                base_type: "skin"
                                metadata_fields:
                                  env_material:
                                    allowed:
                                      - organic material
                                    default: organic material
                                    type: string
                                  env_package:
                                    allowed:
                                      - human-associated
                                    default: human-associated
                                    type: string
                                  host_body_site:
                                    allowed:
                                      - UBERON:pedal digit
                                    default: UBERON:pedal digit
                                    type: string
                                  host_body_product:
                                    allowed:
                                      - UBERON:nail
                                    default: UBERON:nail
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "nail of pedal digit"
                                    default: "nail of pedal digit"
                                    type: string
                              nose:
                                alias: "nose skin"
                              nose skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - "UBERON:external nose"
                                    default: "UBERON:external nose"
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of face"
                                    default: "skin of face"
                                    type: string
                              occiput:
                                alias: "skin of occiput"
                              oral mucosa:
                                alias: "buccal mucosa"
                              palm:
                                alias: "skin of palm of manus"
                              plantar heel:
                                alias: "heel skin"
                              pedal digit skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:pedal digit skin
                                    default: UBERON:pedal digit skin
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of foot"
                                    default: "skin of foot"
                                    type: string
                              popliteal area:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:popliteal area
                                    default: UBERON:popliteal area
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of knee"
                                    default: "skin of knee"
                                    type: string
                              popliteal crease:
                                alias: "popliteal area"
                              popliteal fossa:
                                alias: "popliteal area"
                              retroauricular crease:
                                alias: "retroauricular region"
                              retroauricular region:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:retroauricular area
                                    default: UBERON:retroauricular area
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of external ear"
                                    default: "skin of external ear"
                                    type: string
                              saliva:
                                metadata_fields:
                                  env_package:
                                    allowed:
                                      - human-oral
                                    default: human-oral
                                    type: string
                                  scientific_name:
                                    allowed:
                                      - human oral metagenome
                                    default: human oral metagenome
                                    type: string
                                  taxon_id:
                                    allowed:
                                      - 447426
                                    default: 447426
                                    type: integer
                              scalp:
                                alias: "skin of scalp"
                              skin:
                                metadata_fields:
                                  env_package:
                                    allowed:
                                      - human-skin
                                    default: human-skin
                                    type: string
                                  scientific_name:
                                    allowed:
                                      - human skin metagenome
                                    default: human skin metagenome
                                    type: string
                                  taxon_id:
                                    allowed:
                                      - 539655
                                    default: 539655
                                    type: integer
                              skin of back:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - "UBERON:skin of back"
                                    default: "UBERON:skin of back"
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of trunk"
                                    default: "skin of trunk"
                                    type: string
                              skin of breast:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:breast
                                    default: UBERON:breast
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin"
                                    default: "skin"
                                    type: string
                              skin of cheek:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:cheek
                                    default: UBERON:cheek
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of head"
                                    default: "skin of head"
                                    type: string
                              skin of elbow:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:elbow
                                    default: UBERON:elbow
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of arm"
                                    default: "skin of arm"
                                    type: string
                              skin of external ear:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:ear
                                    default: UBERON:ear
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of external ear"
                                    default: "skin of external ear"
                                    type: string
                              skin of external ear canal:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:external acoustic meatus
                                    default: UBERON:external acoustic meatus
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of external ear"
                                    default: "skin of external ear"
                                    type: string
                              skin of face:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:face
                                    default: UBERON:face
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of face"
                                    default: "skin of face"
                                    type: string
                              skin of forearm:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:skin of forearm
                                    default: UBERON:skin of forearm
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of arm"
                                    default: "skin of arm"
                                    type: string
                              # TODO: for ABTX, the qiita_sample_type for skin of forehead is "skin",
                              #  but for TRPCA it is given as "skin of forehead"; why?
                              skin of forehead:
                                base_type: "skin"
                                metadata_fields:
                                  # TODO: for ABTX, the host_body_site for skin of forehead is "UBERON:skin of forehead",
                                  #  but for TRPCA it is given as "UBERON:forehead"; why?
                                  host_body_site:
                                    allowed:
                                      - UBERON:skin of forehead
                                    default: UBERON:skin of forehead
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin"
                                    default: "skin"
                                    type: string
                              skin of hand:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:skin of hand
                                    default: UBERON:skin of hand
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin"
                                    default: "skin"
                                    type: string
                              skin of inguinal fold:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:inguinal fold
                                    default: UBERON:inguinal fold
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "inguinal skin region"
                                    default: "inguinal skin region"
                                    type: string
                              skin of manubrium of sternum:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:manubrium of sternum
                                    default: UBERON:manubrium of sternum
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of chest"
                                    default: "skin of chest"
                                    type: string
                              skin of occiput:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:surface of occiput
                                    default: UBERON:surface of occiput
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of head"
                                    default: "skin of head"
                                    type: string
                              skin of palm of hypothenar manus:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:hypothenar eminence
                                    default: UBERON:hypothenar eminence
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of hand"
                                    default: "skin of hand"
                                    type: string
                              skin of palm of manus :
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:palmar part of manus
                                    default: UBERON:palmar part of manus
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of hand"
                                    default: "skin of hand"
                                    type: string
                              skin of scalp:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:scalp
                                    default: UBERON:scalp
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of head"
                                    default: "skin of head"
                                    type: string
                              skin of umbilical area:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:umbilicus
                                    default: UBERON:umbilicus
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of trunk"
                                    default: "skin of trunk"
                                    type: string
                              thigh:
                                alias: "upper leg skin"
                              toe web space:
                                alias: "pedal digit skin"
                              toenail:
                                alias: "nail of pedal digit"
                              umbilicus:
                                alias: "skin of umbilical area"
                              upper leg skin:
                                base_type: "skin"
                                metadata_fields:
                                  host_body_site:
                                    allowed:
                                      - UBERON:upper leg skin
                                    default: UBERON:upper leg skin
                                    type: string
                                  qiita_sample_type:
                                    allowed:
                                      - "skin of leg"
                                    default: "skin of leg"
                                    type: string
                              volar forearm:
                                alias: "skin of forearm"
                          mouse:
                            metadata_fields:
                              env_biome:
                                allowed:
                                  - urban biome
                                default: urban biome
                                type: string
                              host_age_units:
                                allowed:
                                  - weeks
                                default: weeks
                                type: string
                              host_common_name:
                                allowed:
                                  - mouse
                                default: mouse
                                type: string
                              host_scientific_name:
                                allowed:
                                  - Mus musculus
                                default: Mus musculus
                                type: string
                              host_taxid:
                                allowed:
                                  - '10090'
                                default: '10090'
                                type: string
                              host_weight_units:
                                allowed:
                                  - g
                                default: g
                                type: string
          free_living:
            metadata_fields:
              empo_1:
                allowed:
                  - Free-living
                default: Free-living
                type: string
            host_type_specific_metadata:
              free_living_non_saline:
                metadata_fields:
                  empo_2:
                    allowed:
                      - Free-living (non-saline)
                    default: Free-living (non-saline)
                    type: string
                host_type_specific_metadata:
                  aqueous_non_saline:
                    metadata_fields:
                      empo_3:
                        allowed:
                          - Aqueous (non-saline)
                        default: Aqueous (non-saline)
                        type: string
                    host_type_specific_metadata:
                      aerosol_non_saline:
                        metadata_fields:
                          empo_4:
                            allowed:
                              - Aerosol (non-saline)
                            default: Aerosol (non-saline)
                            type: string
                      aqueous_surface_non_saline:
                        metadata_fields:
                          empo_4:
                            allowed:
                              - Surface (non-saline)
                            default: Surface (non-saline)
                            type: string
                      water_non_saline:
                        metadata_fields:
                          empo_4:
                            allowed:
                              - Water (non-saline)
                            default: Water (non-saline)
                            type: string
                          env_package:
                            allowed:
                              - water
                            default: water
                            type: string
                        sample_type_specific_metadata:
                          fresh water:
                            metadata_fields:
                              env_biome:
                                allowed:
                                  - freshwater biome
                                default: freshwater biome
                                type: string
                              env_material:
                                allowed:
                                  - fresh water
                                default: fresh water
                                type: string
                              scientific_name:
                                allowed:
                                  - freshwater metagenome
                                default: freshwater metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 449393
                                default: 449393
                                type: integer
                            sample_type_specific_metadata:
                              # is filtered water always urban?
                              filtered water:
                                metadata_fields:
                                  env_biome:
                                    allowed:
                                      - urban biome
                                    default: urban biome
                                    type: string
                          waste water:
                            metadata_fields:
                              env_biome:
                                allowed:
                                  - urban biome
                                default: urban biome
                                type: string
                              env_material:
                                allowed:
                                - waste water
                                - sewage
                                type: string
                              env_package:
                                allowed:
                                  - wastewater/sludge
                                default: wastewater/sludge
                                type: string
                              scientific_name:
                                allowed:
                                  - wastewater metagenome
                                default: wastewater metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 527639
                                default: 527639
                                type: integer
                  solid_non_saline:
                    metadata_fields:
                      empo_3:
                        allowed:
                          - Solid (non-saline)
                        default: Solid (non-saline)
                        type: string
                    host_type_specific_metadata:
                      sediment_non_saline:
                        metadata_fields:
                          empo_4:
                            allowed:
                              - Sediment (non-saline)
                            default: Sediment (non-saline)
                            type: string
                      soil_non_saline:
                        metadata_fields:
                          empo_4:
                            allowed:
                              - Soil (non-saline)
                            default: Soil (non-saline)
                            type: string
                      solid_surface_non_saline:
                        metadata_fields:
                          empo_4:
                            allowed:
                              - Surface (non-saline)
                            default: Surface (non-saline)
                            type: string
                        host_type_specific_metadata:
                          control surface:
                            metadata_fields:
                              env_biome:
                                allowed:
                                  - urban biome
                                default: urban biome
                                type: string
                              env_feature:
                                allowed:
                                  - research facility
                                default: research facility
                                type: string
                              env_material:
                                allowed:
                                  - anthropogenic environmental material
                                default: anthropogenic environmental material
                                type: string
                              env_package:
                                allowed:
                                  - misc environment
                                default: misc environment
                                type: string
                              scientific_name:
                                allowed:
                                  - indoor metagenome
                                default: indoor metagenome
                                type: string
                              taxon_id:
                                allowed:
                                  - 1256227
                                default: 1256227
                                type: integer
                            sample_type_specific_metadata:
                              control surface:
                                metadata_fields:
                                  qiita_sample_type:
                                    allowed:
                                      - control surface
                                    default: control surface
                                    type: string
                              control glove:
                                metadata_fields:
                                  qiita_sample_type:
                                    allowed:
                                      - control glove
                                    default: control glove
                                    type: string
                              control swab:
                                metadata_fields:
                                  qiita_sample_type:
                                    allowed:
                                      - control swab
                                    default: control swab
                                    type: string
          control:
            #default: "not applicable"
            metadata_fields:
              empo_1:
                allowed:
                  - Control
                default: Control
                type: string
              env_feature:
                allowed:
                  - research facility
                default: research facility
                type: string
              env_package:
                allowed:
                  - misc environment
                default: misc environment
                type: string
              scientific_name:
                allowed:
                  - metagenome
                default: metagenome
                type: string
              taxon_id:
                allowed:
                  - 256318
                default: 256318
                type: integer
            host_type_specific_metadata:
              # NB: control surfaces are actually under free-living!
              sterile_water_blank:
                metadata_fields:
                  empo_2:
                    allowed:
                      - Negative
                    default: Negative
                    type: string
                  empo_3:
                    allowed:
                      - Sterile water blank
                    default: Sterile water blank
                    type: string
                  empo_4:
                    allowed:
                      - Sterile water blank
                    default: Sterile water blank
                    type: string
                  env_biome:
                    allowed:
                      - urban biome
                    default: urban biome
                    type: string
                  env_material:
                    allowed:
                      - sterile water
                    default: sterile water
                    type: string
                sample_type_specific_metadata:
                  control blank:
                    metadata_fields:
                      qiita_sample_type:
                        allowed:
                          - control blank
                        default: control blank
                        type: string
                  control blank DNA extraction:
                    base_type: "control blank"
                  control blank library prep:
                    base_type: "control blank"
                  control solvent:
                    base_type: "control blank"
                  control shield:
                    base_type: "control blank"
              single strain:
                metadata_fields:
                  empo_2:
                    allowed:
                      - Positive
                    default: Positive
                    type: string
                  empo_3:
                    allowed:
                      - Single strain
                    default: Single strain
                    type: string
                  empo_4:
                    allowed:
                      - Single strain
                    default: Single strain
                    type: string
                  env_material:
                    allowed:
                      - cell culture
                    default: cell culture
                    type: string
                sample_type_specific_metadata:
                  control positive:
                    metadata_fields:
                      qiita_sample_type:
                        allowed:
                          - control positive
                        default: control positive
                        type: string
                  control positive DNA extraction:
                    base_type: "control positive"
                  control positive library prep:
                    base_type: "control positive"
                  control positive katharoseq:
                    base_type: "control positive"
                  # TODO: check this with Gail; isn't in metadata template
                  control soap:
                    metadata_fields:
                      env_material:
                        allowed:
                          - anthropogenic environmental material
                        default: anthropogenic environmental material
                      scientific_name:
                        allowed:
                          - indoor metagenome
                        default: indoor metagenome
                        type: string
                      taxon_id:
                        allowed:
                          - 1256227
                        default: 1256227
                        type: integer
                  # TODO: check this with Gail; isn't in metadata template
                  control shield:
                    metadata_fields:
                      qiita_sample_type:
                        allowed:
                          - "control shield"
                        default: "control shield"
                        type: string